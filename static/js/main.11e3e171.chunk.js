(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{196:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(31),r=n.n(a),s=n(0),c=n.n(s),o=(n(196),n(197),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))}),i=n(4),l=n(21),d=n(7),u=n(32),j=n(20),h=n.n(j),b=n(185),p=n(6),g=function(e){var t=e.handleAddItem,n=Object(s.useState)(""),a=Object(i.a)(n,2),r=a[0],c=a[1];return Object(p.jsx)(b.a,{value:r,onChange:function(e){c(e.target.value)},onPressEnter:function(e){e.preventDefault(),t(e.target.value),c("")}})},x=n(2),m=n(173),O=n(303),f=n(304),v=n(94),w=n(308),y=n(65),I=n(312),k=n(84),C=n.n(k),T=n(45),S=function(e){var t=e.t,n=e.item,a=e.handleEditItem,r=e.handleDeleteItem,c=e.handleError,o=Object(s.useState)(n.name),l=Object(i.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(n.status),g=Object(i.a)(b,2),x=g[0],k=g[1],S=Object(s.useState)(!1),E=Object(i.a)(S,2),A=E[0],L=E[1];C.a.locale(T.a.language);var P=function(){var e=Object(u.a)(h.a.mark((function e(r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,L(!0),(r=r.trim().replace(/\s+/g," ")).match(/[0-9\u0410-\u042f\u0430-\u044fA-Za-z]/)){e.next=5;break}throw new Error(t("errMeaninglessContent"));case 5:if(!(r.length<2||r.length>100)){e.next=7;break}throw new Error(t("errItemName"));case 7:return e.next=9,a({name:r},n.uuid);case 9:j(r),L(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),c(e.t0),L(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),e.next=4,a({status:t},n.uuid);case 4:k(t),L(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c(e.t0),L(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(m.a,{spinning:A,children:Object(p.jsxs)(O.a,{justify:"center",className:"item",gutter:[20,0],align:"middle",style:{padding:20,marginTop:10},children:[Object(p.jsx)(f.a,{span:3,className:"item-data",children:Object(p.jsx)(v.a,{checked:!!x,onChange:function(){return F(!x)}})}),Object(p.jsx)(f.a,{span:14,className:"item-data",children:Object(p.jsx)(w.a.Text,{className:"item-name",ellipsis:!0,editable:{onChange:P},children:d})}),Object(p.jsx)(f.a,{span:5,children:C()(n.createdAt).format("lll")}),Object(p.jsx)(f.a,{span:2,children:Object(p.jsx)(y.a,{danger:!0,type:"primary",icon:Object(p.jsx)(I.a,{}),onClick:function(){r(n.uuid)}})})]})})},E=n(142),A=function(e){var t=e.t,n=e.items,a=e.handleEditItem,r=e.handleDeleteItem,s=e.handleOnDragEnd,c=e.handleError;return Object(p.jsx)(E.a,{onDragEnd:s,children:Object(p.jsx)(E.c,{droppableId:"todos",children:function(e){return Object(p.jsxs)(f.a,Object(x.a)(Object(x.a)({span:24,className:"todos"},e.droppableProps),{},{ref:e.innerRef,children:[n.map((function(e,n){return Object(p.jsx)(E.b,{draggableId:e.name,index:n,children:function(n){return Object(p.jsx)("div",Object(x.a)(Object(x.a)(Object(x.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:Object(p.jsx)(S,{t:t,item:e,handleEditItem:a,handleDeleteItem:r,handleError:c})}))}},e.uuid)})),e.placeholder]}))}})})},L=n(106);T.a.use(L.e).init({resources:{en:{translation:{quit:"Quit",all:"All",done:"Done",undone:"Undone",todoTitle:"Todo",old:"Old",new:"New",signIn:"Sign In",signUp:"Sign Up",signInLink:"Account already have",signUpLink:"Registration",mesInputLogin:"Please input your login!",mesInputPassword:"Please input your password!",mesInputConfirm:"Please confirm your password!",login:"Login",password:"Password",confirm:"Confirm password",registration:"Registration",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",en:"English",errLoginValid:"bad login validation, need 4-100 symbols and must with letters and can with numbers",errPassValid:"need more difficult password, uisng only a-b and numbers",errConfirm:"confirm and passwor must be equal",successRigistr:"Success registration",errItemName:"Need more, than 1 symbol and less, than 100",errMeaninglessContent:"meaningless content",itemsEmpty:"list is empty",errBadName:"Invalid name",myTodos:"My todos",listUsers:"List of users",name:"Name",status:"Status",createdAt:"Created at",index:"Index",userId:"User ID",doneTodo:"Done",undoneTodo:"Undone"}},ru:{translation:{quit:"\u0412\u044b\u0439\u0442\u0438",all:"\u0412\u0441\u0435",done:"\u0421\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435",undone:"\u041d\u0435 \u0441\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435",todoTitle:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b",old:"\u0421\u0442\u0430\u0440\u044b\u0435",new:"\u041d\u043e\u0432\u044b\u0435",signIn:"\u0412\u043e\u0439\u0442\u0438",signUp:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",signInLink:"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442",signUpLink:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",mesInputLogin:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!",mesInputPassword:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!",mesInputConfirm:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!",login:"\u041b\u043e\u0433\u0438\u043d",password:"\u041f\u0430\u0440\u043e\u043b\u044c",confirm:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",registration:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",en:"English",errLoginValid:"\u043b\u043e\u0433\u0438\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0442 4 \u0434\u043e 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0441 \u0431\u0443\u043a\u0432\u043e\u0439 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441 \u0446\u0438\u0444\u0440\u043e\u0439",errPassValid:"\u043d\u0443\u0436\u0435\u043d \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",errConfirm:"\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u043d\u0438\u0435 \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b",successRigistr:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",errItemName:"\u041d\u0443\u0436\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c 1 \u0438 \u043c\u0435\u043d\u044c\u0448\u0435 \u0447\u0435\u043c 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",errMeaninglessContent:"\u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442",itemsEmpty:"\u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442",errBadName:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0438\u043c\u044f",myTodos:"\u041c\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b",listUsers:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",status:"\u0421\u0442\u0430\u0442\u0443\u0441",createdAt:"\u0421\u043e\u0437\u0434\u0430\u043d",index:"\u0418\u043d\u0434\u0435\u043a\u0441",userId:"ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",doneTodo:"\u0421\u0434\u0435\u043b\u0430\u043d\u0430",undoneTodo:"\u041d\u0435 \u0441\u0434\u0435\u043b\u0430\u043d\u0430"}}}}),T.a.changeLanguage("en");var P=function(e){var t=e.t,n=e.filter,a=e.sort,r=e.handleFilter,s=e.handleSort;return Object(p.jsxs)(O.a,{style:{marginTop:10},children:[Object(p.jsx)(f.a,{span:12,children:Object(p.jsxs)(O.a,{children:[Object(p.jsx)(y.a,{type:"all"===n?"primary":"default",onClick:function(){return r("all")},children:t("all")}),Object(p.jsx)(y.a,{type:"done"===n?"primary":"default",onClick:function(){return r("done")},children:t("done")}),Object(p.jsx)(y.a,{type:"undone"===n?"primary":"default",onClick:function(){return r("undone")},children:t("undone")})]})}),Object(p.jsx)(f.a,{span:12,children:Object(p.jsxs)(O.a,{justify:"end",children:[Object(p.jsx)(y.a,{type:"asc"===a?"primary":"default",onClick:function(){return s("asc")},children:t("old")}),Object(p.jsx)(y.a,{type:"desc"===a?"primary":"default",onClick:function(){return s("desc")},children:t("new")})]})})]})},F=n(182),U=n(46),z=n.n(U),N=n(104),D=n(61),M=c.a.createContext(),V=function(e){var t=e.t,n=e.handleChangeLanguage,a=Object(s.useContext)(M),r=Object(i.a)(a,2),c=r[0],o=r[1],d=N.a.Option,u=Object(l.g)();return Object(p.jsxs)(D.a,{onClick:function(e){var t=e.key;"logout"===t&&(localStorage.removeItem("accessToken"),o("")),t.includes("/")&&u(t)},selectedKeys:[],mode:"horizontal",theme:"dark",style:{display:"flex",justifyContent:"end"},children:[Object(p.jsx)(D.a.Item,{children:t("myTodos")},"/todos"),"admin"===c&&Object(p.jsx)(D.a.Item,{children:t("listUsers")},"/users"),Object(p.jsx)(D.a.Item,{children:Object(p.jsxs)(N.a,{defaultValue:T.a.language,onChange:n,children:[Object(p.jsx)(d,{value:"ru",children:t("ru")}),Object(p.jsx)(d,{value:"en",children:t("en")})]})},"languages"),Object(p.jsx)(D.a.Item,{danger:!0,children:t("quit")},"/login")]})},q=function(e){var t=e.t,n=e.links,a=e.handleError,r=e.handleChangeLanguage,c=e.alertMessage,o=Object(s.useState)("all"),l=Object(i.a)(o,2),j=l[0],b=l[1],x=Object(s.useState)("desc"),v=Object(i.a)(x,2),w=v[0],y=v[1],I=Object(s.useState)(1),k=Object(i.a)(I,2),C=k[0],T=k[1],S=Object(s.useState)([]),E=Object(i.a)(S,2),L=E[0],U=E[1],N=Object(s.useState)(0),D=Object(i.a)(N,2),M=D[0],q=D[1],B=Object(s.useState)(5),R=Object(i.a)(B,2),H=R[0],Z=R[1],J=Object(s.useState)(!1),K=Object(i.a)(J,2),$=K[0],Q=K[1],G=Object(s.useState)([]),W=Object(i.a)(G,2),X=W[0],Y=W[1],_=function(){var e=Object(u.a)(h.a.mark((function e(){var r,s,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(n.getTodos,"?filterBy=").concat(j,"&sortBy=").concat(w,"&page=").concat(C,"&pageSize=").concat(H),e.next=4,z.a.get(r,{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 4:s=e.sent,o=s.data.result,U(o.rows),(i=Object(d.a)(o.rows)).push(o.nextTodo),i.unshift(o.prevTodo),Y(i),q(o.count),0===o.count&&c(t("itemsEmpty"),"info"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){_()}),[w,j,C,H]);var ee=function(){var e=Object(u.a)(h.a.mark((function e(r){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=r.trim().replace(/\s+/g," ")){e.next=4;break}throw new Error(t("errBadName"));case 4:if(r.match(/[0-9\u0410-\u042f\u0430-\u044fA-Za-z]/)){e.next=6;break}throw new Error(t("errMeaninglessContent"));case 6:if(!(r.length<2||r.length>100)){e.next=8;break}throw new Error(t("errItemName"));case 8:return Q(!0),s={name:r,done:!1},e.next=12,z.a.post(n.postTodo,s,{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 12:_(),b("all"),y("desc"),T(1),Q(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),a(e.t0),Q(!1);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.patch("".concat(n.postTodo,"/").concat(a),t,{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 2:"boolean"===typeof t.status&&_();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q(!0),e.next=4,z.a.delete("".concat(n.postTodo,"/").concat(t),{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 4:if(!(1===L.length&&M>1)){e.next=8;break}T(C-1),e.next=10;break;case 8:return e.next=10,_();case 10:Q(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),a(e.t0),Q(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(h.a.mark((function e(t){var r,s,c,o,i,l,u,j,b,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,r=t.source.index+1,s=t.destination.index+1,r!==s){e.next=8;break}return Q(!1),e.abrupt("return",void 0);case 8:return c=Object(d.a)(X),o={},r>s?(o.prevTodoIndex=null===(i=c[s-1])||void 0===i?void 0:i.index,o.nextTodoIndex=null===(l=c[s])||void 0===l?void 0:l.index):(o.prevTodoIndex=null===(u=c[s])||void 0===u?void 0:u.index,o.nextTodoIndex=null===(j=c[s+1])||void 0===j?void 0:j.index),(b={uuid:c[r].uuid,name:c[r].name}).index=(o.nextTodoIndex+o.prevTodoIndex)/2,c[r].index=parseInt(b.index),p=c.splice(r,1)[0],c.splice(s,0,p),Y(c),U(c.slice(1,L.length+1).filter((function(e){return e.uuid}))),e.next=20,z.a.patch(n.todoMoved,{todo:b},{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 20:Q(!1),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(2),a(e.t0),Q(!1);case 27:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:localStorage.getItem("accessToken")&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(V,{t:t,handleChangeLanguage:r}),Object(p.jsx)(O.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"80vh"},children:Object(p.jsxs)(f.a,{xxl:12,xl:13,lg:16,md:20,sm:22,xs:23,children:[Object(p.jsx)(O.a,{justify:"center",children:Object(p.jsx)("h2",{children:t("todoTitle")})}),Object(p.jsx)(O.a,{justify:"center",children:Object(p.jsx)(g,{handleAddItem:ee})}),Object(p.jsx)(P,{t:t,filter:j,sort:w,handleFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";b(e),T(1)},handleSort:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new";y(e),T(1)}}),Object(p.jsxs)(m.a,{spinning:$,children:[Object(p.jsx)(O.a,{justify:"center",children:Object(p.jsx)(A,{t:t,pageSize:H,items:L,handleEditItem:te,handleDeleteItem:ne,handleOnDragEnd:ae,handleError:a})}),Object(p.jsx)(O.a,{justify:"center",children:Object(p.jsx)(F.a,{style:{marginBottom:"50px",marginTop:50},onChange:function(e,t){T(e),Z(t)},total:M,defaultCurrent:0,current:C,defaultPageSize:H,pageSize:H,pageSizeOptions:[5,10,15,20],hideOnSinglePage:!0})})]})]})})]})})},B=n(184),R=n(307),H=n(310),Z=n(67),J=function(e){var t=e.t,n=e.links,a=e.handleError,r=e.handleChangeLanguage,c=e.alertMessage,o=Object(l.g)(),d=Object(s.useContext)(M),j=Object(i.a)(d,2)[1],g=N.a.Option;Object(s.useEffect)((function(){localStorage.removeItem("accessToken"),j("")}),[]);var x=function(){var e=Object(u.a)(h.a.mark((function e(r){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(s=r).login.match(/^(?=.*[A-Za-z])[\w]{4,100}$/)){e.next=4;break}throw new Error(t("errLoginValid"));case 4:if(s.password.match(/^(?=.*[A-Za-z])(?=.*\d)[\w]{8,100}$/)){e.next=6;break}throw new Error(t("errPassValid"));case 6:if(s.password===s.confirm){e.next=8;break}throw new Error(t("errConfirm"));case 8:return e.next=10,z.a.post(n.registration,s);case 10:c(t("successRigistr"),"success"),o("/login"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(O.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"80vh"},children:Object(p.jsxs)(f.a,{xxl:12,xl:13,lg:16,md:20,sm:22,xs:23,children:[Object(p.jsx)(O.a,{justify:"center",children:Object(p.jsx)("h2",{children:t("registration")})}),Object(p.jsxs)(R.a,{name:"basic",labelCol:{span:5},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:x,onFinishFailed:function(e){e.errorFields.forEach((function(t){e.message=t.errors[0],a(e)}))},autoComplete:"off",children:[Object(p.jsx)(R.a.Item,{label:t("login"),name:"login",rules:[{required:!0,message:t("mesInputLogin")}],children:Object(p.jsx)(b.a,{})}),Object(p.jsx)(R.a.Item,{label:t("password"),name:"password",rules:[{required:!0,message:t("mesInputPassword")}],children:Object(p.jsx)(b.a.Password,{})}),Object(p.jsx)(R.a.Item,{name:"confirm",label:t("confirm"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:t("mesInputConfirm")},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(p.jsx)(b.a.Password,{})}),Object(p.jsxs)(O.a,{children:[Object(p.jsx)(f.a,{span:8,offset:5,children:Object(p.jsxs)(H.b,{children:[Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",children:t("signUp")}),Object(p.jsx)(w.a.Text,{children:Object(p.jsx)(Z.b,{to:"/login",children:t("signInLink")})})]})}),Object(p.jsx)(f.a,{span:8,children:Object(p.jsx)(O.a,{justify:"end",children:Object(p.jsxs)(N.a,{defaultValue:T.a.language,onChange:r,children:[Object(p.jsx)(g,{value:"ru",children:t("ru")}),Object(p.jsx)(g,{value:"en",children:t("en")})]})})})]})]})]})})})},K=function(e){var t=e.t,n=e.links,a=e.handleError,r=e.handleChangeLanguage,c=Object(l.g)(),o=Object(s.useContext)(M),d=Object(i.a)(o,2)[1],j=N.a.Option;Object(s.useEffect)((function(){localStorage.removeItem("accessToken"),d("")}),[]);var g=function(){var e=Object(u.a)(h.a.mark((function e(t){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t,e.next=4,z.a.post(n.login,r);case 4:s=e.sent,localStorage.setItem("accessToken",s.data.token),d(s.data.role),c("/todos"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(O.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"80vh"},children:Object(p.jsxs)(f.a,{xxl:12,xl:13,lg:16,md:20,sm:22,xs:23,children:[Object(p.jsx)(O.a,{justify:"center",children:Object(p.jsx)("h2",{children:t("login")})}),Object(p.jsxs)(R.a,{name:"basic",labelCol:{span:5},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:g,onFinishFailed:function(e){e.errorFields.forEach((function(t){e.message=t.errors[0],a(e)}))},autoComplete:"off",children:[Object(p.jsx)(R.a.Item,{label:t("login"),name:"login",rules:[{required:!0,message:t("mesInputLogin")}],children:Object(p.jsx)(b.a,{})}),Object(p.jsx)(R.a.Item,{label:t("password"),name:"password",rules:[{required:!0,message:t("mesInputPassword")}],children:Object(p.jsx)(b.a.Password,{})}),Object(p.jsxs)(O.a,{children:[Object(p.jsx)(f.a,{offset:5,span:8,children:Object(p.jsxs)(H.b,{children:[Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",children:t("signIn")}),Object(p.jsx)(w.a.Text,{children:Object(p.jsx)(Z.b,{to:"/registration",children:t("signUpLink")})})]})}),Object(p.jsx)(f.a,{span:8,children:Object(p.jsx)(O.a,{justify:"end",children:Object(p.jsxs)(N.a,{defaultValue:T.a.language,onChange:r,children:[Object(p.jsx)(j,{value:"ru",children:t("ru")}),Object(p.jsx)(j,{value:"en",children:t("en")})]})})})]})]})]})})})},$=n(305),Q=n(309),G=function(e){var t=e.users,n=e.handleSetUser;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(D.a,{onClick:n,mode:"inline",theme:"dark",children:t.map((function(e){return Object(p.jsx)(D.a.Item,{children:e.login},e.uuid)}))})})},W=n(306),X=function(e){var t=e.t,n=e.todos,a=W.a.Column;return Object(p.jsx)("div",{children:Object(p.jsxs)(W.a,{dataSource:n,rowKey:"uuid",children:[Object(p.jsx)(a,{align:"center",title:t("status"),dataIndex:"status"}),Object(p.jsx)(a,{align:"center",title:t("name"),dataIndex:"name"}),Object(p.jsx)(a,{align:"center",title:t("createdAt"),dataIndex:"createdAt"}),Object(p.jsx)(a,{align:"center",title:t("index"),dataIndex:"index"})]})})},Y=function(e){var t=e.t,n=e.links,a=e.handleError,r=e.handleChangeLanguage,c=Object(s.useContext)(M),o=Object(i.a)(c,2),d=o[0],j=(o[1],$.a.Header),b=$.a.Sider,g=$.a.Content,x=Object(s.useState)([]),O=Object(i.a)(x,2),f=O[0],v=O[1],w=Object(s.useState)([]),y=Object(i.a)(w,2),I=y[0],k=y[1],T=Object(s.useState)(),S=Object(i.a)(T,2),E=S[0],A=S[1],L=Object(s.useState)(!1),P=Object(i.a)(L,2),F=P[0],U=P[1],N=Object(l.g)(),D=function(){var e=Object(u.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),e.next=4,z.a.get(n.users,{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 4:t=e.sent,v(t.data.users),U(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),U(!1),a(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(h.a.mark((function e(r){var s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.a.get("".concat(n.todosOfUser,"?userId=").concat(r),{headers:{Authorization:localStorage.getItem("accessToken"),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 3:s=e.sent,c=s.data.todos.map((function(e){return e.status=e.status?t("doneTodo"):t("undoneTodo"),e.createdAt=C()(e.createdAt).format("lll"),e})),k(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){if("admin"!==d)return N("/todos");D()}),[]);return Object(p.jsxs)(m.a,{spinning:F,children:[Object(p.jsx)(V,{t:t,handleChangeLanguage:r}),Object(p.jsx)($.a,{children:Object(p.jsx)(b,{style:{height:"95%",width:"200px",position:"fixed",overflow:"auto"},children:Object(p.jsx)(G,{t:t,users:f,handleSetUser:function(e){var t=e.key;A(t),q(t)}})})}),Object(p.jsxs)($.a,{style:{marginLeft:"200px"},children:[Object(p.jsx)(j,{style:{backgroundColor:"#e6f7ff"},children:Object(p.jsxs)(Q.a,{style:{margin:"16px 0"},children:[Object(p.jsx)(Q.a.Item,{children:t("userId")}),Object(p.jsx)(Q.a.Item,{children:E})]})}),Object(p.jsx)(g,{children:Object(p.jsx)(X,{t:t,todos:I})})]})]})},_=n(311),ee=(n(295),"https://postgres-heroku-application.herokuapp.com");console.log(ee);var te={getTodos:"".concat(ee,"/todos"),postTodo:"".concat(ee,"/todo"),login:"".concat(ee,"/login"),registration:"".concat(ee,"/registration"),todoMoved:"".concat(ee,"/todoMoved"),users:"".concat(ee,"/users"),todosOfUser:"".concat(ee,"/todosOfUser")};var ne=function(){var e=Object(s.useState)("user"),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(_.a)().t,c=Object(l.g)(),o=function(e){var t,n,a,r;return"not admin"===(null===(t=e.response)||void 0===t?void 0:t.data)&&(c("/todos"),localStorage.setItem("role","user")),null!==(n=e.response)&&void 0!==n&&n.data?(u(e.response.data,"error"),(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.includes("jwt"))&&c("/login")):e.message?u(e.message,"error"):void 0},d=function(e){T.a.changeLanguage(e)},u=function(e,t){B.a.open({description:e,type:t})};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(M.Provider,{value:[n,a],children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/login",element:Object(p.jsx)(K,{t:r,links:te,handleError:o,handleChangeLanguage:d})}),Object(p.jsx)(l.b,{path:"/registration",element:Object(p.jsx)(J,{t:r,links:te,handleError:o,handleChangeLanguage:d,alertMessage:u})}),Object(p.jsx)(l.b,{path:"/users",element:Object(p.jsx)(Y,{t:r,links:te,handleError:o,handleChangeLanguage:d,alertMessage:u})}),Object(p.jsx)(l.b,{path:"/todos",element:Object(p.jsx)(q,{t:r,role:n,links:te,handleError:o,handleChangeLanguage:d,alertMessage:u})}),Object(p.jsx)(l.b,{path:"*",element:Object(p.jsx)(l.a,{replace:!0,to:"/todos"})})]})})})};r.a.render(Object(p.jsx)(Z.a,{children:Object(p.jsx)(ne,{})}),document.getElementById("root")),o()}},[[301,1,2]]]);
//# sourceMappingURL=main.11e3e171.chunk.js.map